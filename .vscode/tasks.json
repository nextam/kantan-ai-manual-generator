{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "ã™ã¹ã¦ã®ãƒ­ãƒ¼ã‚«ãƒ«ã‚µãƒ¼ãƒãƒ¼ã‚’åœæ­¢",
      "type": "shell",
      "command": "powershell",
      "args": [
        "-Command",
        "try { Get-Process | Where-Object {$_.ProcessName -eq 'python' -and ($_.CommandLine -like '*app.py*' -or $_.CommandLine -like '*flask*' -or $_.CommandLine -like '*gunicorn*' -or $_.CommandLine -like '*streamlit*')} | Stop-Process -Force -ErrorAction SilentlyContinue; Write-Host 'ã™ã¹ã¦ã®ãƒ­ãƒ¼ã‚«ãƒ«ã‚µãƒ¼ãƒãƒ¼ã‚’åœæ­¢ã—ã¾ã—ãŸ' } catch { Write-Host 'ã‚µãƒ¼ãƒãƒ¼åœæ­¢å‡¦ç†å®Œäº†' }"
      ],
      "group": "none",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared",
        "showReuseMessage": true,
        "clear": false
      }
    },
    {
      "label": "ã™ã¹ã¦ã®Pythonãƒ—ãƒ­ã‚»ã‚¹ã‚’å¼·åˆ¶çµ‚äº†",
      "type": "shell",
      "command": "powershell",
      "args": [
        "-Command",
        "$ErrorActionPreference = \"SilentlyContinue\"; Write-Host \"=== ã™ã¹ã¦ã®Pythonãƒ—ãƒ­ã‚»ã‚¹ã‚’å¼·åˆ¶çµ‚äº† ===\"; $processes = Get-Process python -ErrorAction SilentlyContinue; if ($processes) { $processes | ForEach-Object { Write-Host \"çµ‚äº†: PID $($_.Id)\"; Stop-Process -Id $_.Id -Force -ErrorAction SilentlyContinue }; Start-Sleep -Seconds 1; $remaining = Get-Process python -ErrorAction SilentlyContinue; if ($remaining) { Write-Host \"è­¦å‘Š: ä¸€éƒ¨ã®ãƒ—ãƒ­ã‚»ã‚¹ãŒæ®‹ã£ã¦ã„ã¾ã™\" } else { Write-Host \"âœ… ã™ã¹ã¦ã®Pythonãƒ—ãƒ­ã‚»ã‚¹ã‚’çµ‚äº†ã—ã¾ã—ãŸ\" } } else { Write-Host \"âœ… Pythonãƒ—ãƒ­ã‚»ã‚¹ã¯å®Ÿè¡Œã•ã‚Œã¦ã„ã¾ã›ã‚“\" }"
      ],
      "group": "none",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared",
        "showReuseMessage": true,
        "clear": false
      }
    },
    {
      "label": "ElasticSearch & Redis å†èµ·å‹•",
      "type": "shell",
      "command": "powershell",
      "args": [
        "-Command",
        "Write-Host \"=== ElasticSearch and Redis å†èµ·å‹• ===\"; Write-Host \"\"; Write-Host \"æ—¢å­˜ã‚³ãƒ³ãƒ†ãƒŠã‚’åœæ­¢ä¸­...\"; docker-compose -f docker-compose.dev.yml down elasticsearch redis 2>$null; Start-Sleep -Seconds 2; Write-Host \"å®Œäº†\"; Write-Host \"\"; Write-Host \"ã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•ä¸­...\"; docker-compose -f docker-compose.dev.yml up -d elasticsearch redis; Start-Sleep -Seconds 5; Write-Host \"å®Œäº†\"; Write-Host \"\"; Write-Host \"ã‚µãƒ¼ãƒ“ã‚¹çŠ¶æ…‹ç¢ºèªä¸­...\"; docker ps --filter 'name=elasticsearch' --filter 'name=redis' --format 'table {{.Names}}\t{{.Status}}\t{{.Ports}}'; Write-Host \"\"; Write-Host \"âœ… ElasticSearch and Redis å†èµ·å‹•å®Œäº†\""
      ],
      "group": "none",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared",
        "showReuseMessage": true,
        "clear": false
      }
    },
    {
      "label": "ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ç”Ÿæˆã‚µãƒ¼ãƒãƒ¼èµ·å‹• (ãƒãƒ¼ãƒˆ5000) - Waitress",
      "type": "shell",
      "command": "cmd",
      "args": [
        "/c",
        "run_local_gunicorn.bat"
      ],
      "isBackground": true,
      "group": "none",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "dedicated",
        "showReuseMessage": true,
        "clear": false
      },
      "problemMatcher": [],
      "dependsOn": [
        "ã™ã¹ã¦ã®Pythonãƒ—ãƒ­ã‚»ã‚¹ã‚’å¼·åˆ¶çµ‚äº†",
        "ElasticSearch & Redis å†èµ·å‹•"
      ],
      "dependsOrder": "sequence"
    },
    {
      "label": "ğŸš€ ã‚¯ãƒªãƒ¼ãƒ³ã‚µãƒ¼ãƒãƒ¼èµ·å‹•ï¼ˆãƒ¯ãƒ³ã‚¹ãƒ†ãƒƒãƒ—ï¼‰",
      "type": "shell",
      "command": "cmd",
      "args": [
        "/c",
        "start_server_clean.bat"
      ],
      "isBackground": true,
      "group": {
        "kind": "build",
        "isDefault": true
      },
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "dedicated",
        "showReuseMessage": false,
        "clear": true
      },
      "problemMatcher": []
    },
    {
      "label": "ã‚µãƒ¼ãƒãƒ¼çŠ¶æ…‹ç¢ºèª",
      "type": "shell",
      "command": "powershell -Command \"Write-Host '=== ã‚µãƒ¼ãƒãƒ¼çŠ¶æ…‹ç¢ºèª ==='; Write-Host ''; try { $response = Invoke-WebRequest -Uri 'http://localhost:5000' -TimeoutSec 3 -ErrorAction Stop; Write-Host 'âœ… Manual Generator (Port 5000): å‹•ä½œä¸­' } catch { Write-Host 'âŒ Manual Generator (Port 5000): åœæ­¢ä¸­' }\"",
      "group": "none",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "shared",
        "showReuseMessage": true,
        "clear": false
      }
    },
    {
      "label": "ã‚µãƒ¼ãƒ“ã‚¹çŠ¶æ…‹ç¢ºèªï¼ˆè©³ç´°ï¼‰",
      "type": "shell",
      "command": "powershell",
      "args": [
        "-Command",
        "Write-Host '=== ã‚µãƒ¼ãƒ“ã‚¹çŠ¶æ…‹ç¢ºèªï¼ˆè©³ç´°ï¼‰==='; Write-Host ''; Write-Host '[1] Pythonãƒ—ãƒ­ã‚»ã‚¹:'; $pythonProcesses = Get-Process | Where-Object {$_.ProcessName -eq 'python'}; if ($pythonProcesses) { $pythonProcesses | ForEach-Object { Write-Host \"  PID $($_.Id) - èµ·å‹•: $($_.StartTime)\" } } else { Write-Host '  ãªã—' }; Write-Host ''; Write-Host '[2] Docker ã‚³ãƒ³ãƒ†ãƒŠ (ElasticSearch & Redis):'; docker ps --filter 'name=elasticsearch' --filter 'name=redis' --format 'table {{.Names}}\t{{.Status}}\t{{.Ports}}'; Write-Host ''; Write-Host '[3] Flask ã‚µãƒ¼ãƒãƒ¼:'; try { $response = Invoke-WebRequest -Uri 'http://localhost:5000/auth/status' -TimeoutSec 3 -ErrorAction Stop; Write-Host \"  âœ… Port 5000: å‹•ä½œä¸­ (Status: $($response.StatusCode))\" } catch { Write-Host '  âŒ Port 5000: åœæ­¢ä¸­' }; Write-Host ''; Write-Host '[4] ElasticSearch API:'; try { $esResponse = Invoke-WebRequest -Uri 'http://localhost:9200' -TimeoutSec 3 -ErrorAction Stop -UseBasicParsing; $esData = $esResponse.Content | ConvertFrom-Json; Write-Host \"  âœ… Port 9200: å‹•ä½œä¸­ - $($esData.cluster_name)\" } catch { Write-Host '  âŒ Port 9200: åœæ­¢ä¸­' }; Write-Host ''"
      ],
      "group": "none",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "shared",
        "showReuseMessage": true,
        "clear": false
      }
    },
    {
      "label": "ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ç”Ÿæˆã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ã",
      "type": "shell",
      "command": "start http://localhost:5000",
      "group": "none",
      "presentation": {
        "echo": true,
        "reveal": "silent",
        "focus": false,
        "panel": "shared",
        "showReuseMessage": true,
        "clear": false
      }
    }
  ]
}